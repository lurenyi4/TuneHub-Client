<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TuneHub - 统一音乐信息解析服务</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>🎵 TuneHub</h1>
            <p class="subtitle">统一的音乐信息解析服务</p>
            <button id="theme-toggle" class="theme-toggle" title="切换主题">🌓</button>
        </header>

        <nav class="tabs">
            <button class="tab-btn active" data-tab="search">搜索</button>
            <button class="tab-btn" data-tab="playlist">歌单</button>
            <button class="tab-btn" data-tab="local">本地库</button>
            <button class="tab-btn" data-tab="history">播放历史</button>
            <button class="tab-btn" data-tab="advanced">高级功能</button>
        </nav>

        <!-- 搜索标签页 -->
        <div id="search-tab" class="tab-content active">
            <div class="search-section">
                <div class="search-controls">
                    <select id="search-platform">
                        <option value="aggregateSearch">聚合搜索（全部平台）</option>
                        <option value="netease">网易云音乐</option>
                        <option value="kuwo">酷我音乐</option>
                        <option value="qq">QQ音乐</option>
                    </select>
                    <div class="search-input-wrapper">
                        <input type="text" id="search-keyword" placeholder="输入歌曲名、歌手名..." />
                        <div id="search-suggestions" class="search-suggestions"></div>
                    </div>
                    <button id="search-btn">搜索</button>
                </div>
                <div id="search-results" class="results-container"></div>
            </div>
        </div>

        <!-- 歌单标签页 -->
        <div id="playlist-tab" class="tab-content">
            <div class="playlist-section">
                <div class="input-group">
                    <select id="playlist-platform">
                        <option value="netease">网易云音乐</option>
                        <option value="kuwo">酷我音乐</option>
                        <option value="qq">QQ音乐</option>
                    </select>
                    <input type="text" id="playlist-id" placeholder="输入歌单ID" />
                    <button id="load-playlist-btn">加载歌单</button>
                </div>
                
                <!-- 歌单历史记录 -->
                <div id="playlist-history" class="playlist-history" style="display: none;">
                    <h4>最近加载的歌单</h4>
                    <div id="playlist-history-list" class="playlist-history-list"></div>
                </div>

                <div id="playlist-info" class="playlist-info"></div>
                <div id="playlist-actions" class="playlist-actions" style="display: none;">
                    <button id="save-all-songs-btn" class="save-all-btn">保存全部歌曲</button>
                    <div id="save-progress" class="save-progress" style="display: none;"></div>
                </div>
                <div id="playlist-results" class="results-container"></div>
            </div>
        </div>

        <!-- 本地库标签页 -->
        <div id="local-tab" class="tab-content">
            <div class="local-section">
                <div class="input-group">
                    <input type="text" id="local-search-input" placeholder="搜索本地歌曲..." />
                    <button id="refresh-local-btn">刷新列表</button>
                </div>
                <div id="local-stats" class="playlist-info"></div>
                <div id="local-results" class="results-container"></div>
            </div>
        </div>

        <!-- 播放历史标签页 -->
        <div id="history-tab" class="tab-content">
            <div class="history-section">
                <div class="history-header">
                    <h2>播放历史</h2>
                    <button id="clear-history-btn" class="clear-btn">清空历史</button>
                </div>
                <div id="history-results" class="results-container"></div>
            </div>
        </div>

        <!-- 高级功能标签页 -->
        <div id="advanced-tab" class="tab-content">
            <div class="advanced-section">
                <div class="advanced-tabs">
                    <button class="advanced-tab-btn active" data-advanced-tab="toplist">排行榜</button>
                    <button class="advanced-tab-btn" data-advanced-tab="stats">统计</button>
                </div>

                <!-- 排行榜子标签页 -->
                <div id="advanced-toplist" class="advanced-tab-content active">
                    <div class="toplist-section">
                        <div class="input-group">
                            <select id="toplist-platform">
                                <option value="netease">网易云音乐</option>
                                <option value="kuwo">酷我音乐</option>
                                <option value="qq">QQ音乐</option>
                            </select>
                            <button id="load-toplists-btn">加载排行榜列表</button>
                        </div>
                        <div id="toplists-list" class="toplists-container"></div>
                        <div id="toplist-results" class="results-container"></div>
                    </div>
                </div>

                <!-- 统计子标签页 -->
                <div id="advanced-stats" class="advanced-tab-content">
                    <div class="stats-section">
                        <div class="stats-controls">
                            <select id="stats-period">
                                <option value="today">今天</option>
                                <option value="week">本周</option>
                                <option value="month">本月</option>
                            </select>
                            <button id="refresh-stats-btn">刷新统计</button>
                        </div>
                        <div id="stats-display" class="stats-display">
                            <div class="stat-card">
                                <h3>系统状态</h3>
                                <div id="system-status"></div>
                            </div>
                            <div class="stat-card">
                                <h3>统计摘要</h3>
                                <div id="stats-summary"></div>
                            </div>
                            <div class="stat-card">
                                <h3>平台统计</h3>
                                <div id="platform-stats"></div>
                            </div>
                            <div class="stat-card">
                                <h3>QPS 统计</h3>
                                <div id="qps-stats"></div>
                            </div>
                            <div class="stat-card">
                                <h3>请求类型统计</h3>
                                <div id="type-stats"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 全屏歌词界面 -->
    <div id="full-screen-lyrics" class="full-screen-lyrics">
        <div class="fs-lyrics-bg" id="fs-lyrics-bg"></div>
        <div class="fs-lyrics-content">
            <div class="fs-header">
                <button id="close-fs-lyrics-btn" class="close-btn-large">×</button>
            </div>
            <div class="fs-main">
                <div class="fs-cover-container">
                    <img id="fs-cover" src="" alt="封面" />
                </div>
                <div class="fs-info">
                    <h2 id="fs-song-name">未播放</h2>
                    <p id="fs-song-artist">-</p>
                    <div id="fs-lyrics-container" class="fs-lyrics-container"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- 固定在底部的播放器 -->
    <div id="bottom-player" class="bottom-player">
        <canvas id="visualizer-canvas"></canvas>
        <div class="player-content">
            <div class="player-left">
                <img id="player-cover" class="player-cover" src="" alt="封面" />
                <div class="player-song-info">
                    <div id="player-song-name" class="player-song-name">未播放</div>
                    <div id="player-song-artist" class="player-song-artist">-</div>
                </div>
            </div>
            <div class="player-center">
                <div class="player-controls">
                    <button id="prev-btn" class="player-control-btn" title="上一首 (←)">⏮</button>
                    <button id="play-pause-btn" class="player-control-btn play-pause-btn" title="播放/暂停 (空格)">▶</button>
                    <button id="next-btn" class="player-control-btn" title="下一首 (→)">⏭</button>
                    <button id="play-mode-btn" class="player-control-btn" title="播放模式">▶</button>
                </div>
                <div class="player-progress-container">
                    <span id="current-time" class="time-display">00:00</span>
                    <input type="range" id="progress-bar" class="progress-bar" min="0" max="100" value="0" step="0.1">
                    <span id="total-duration" class="time-display">00:00</span>
                </div>
                <div id="scrolling-lyrics" class="scrolling-lyrics"></div>
                <audio id="audio-player" style="display: none;"></audio>
            </div>
            <div class="player-right">
                <div class="volume-control">
                    <button id="volume-btn" class="player-btn" title="音量">🔊</button>
                    <input type="range" id="volume-slider" class="volume-slider" min="0" max="100" value="50" title="音量控制 (↑↓)">
                </div>
                <select id="player-quality" class="player-quality-select">
                    <option value="128k">128k</option>
                    <option value="320k">320k</option>
                    <option value="flac">FLAC</option>
                    <option value="flac24bit" selected>Hi-Res</option>
                </select>
                <button id="player-queue-btn" class="player-btn">队列</button>
                <button id="player-lyrics-btn" class="player-btn">歌词</button>
            </div>
        </div>
        <div id="player-queue-panel" class="player-queue-panel">
            <div class="queue-header">
                <h3>播放队列</h3>
                <div class="queue-actions">
                    <button id="clear-queue-btn" class="clear-queue-btn">清空队列</button>
                    <button id="close-queue-btn" class="close-btn">×</button>
                </div>
            </div>
            <div id="queue-list" class="queue-list"></div>
        </div>
        <div id="player-lyrics-panel" class="player-lyrics-panel">
            <div class="lyrics-header">
                <h3>歌词</h3>
                <button id="close-lyrics-btn" class="close-btn">×</button>
            </div>
            <div id="player-lyrics-display" class="player-lyrics-display"></div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>