# TuneHub-Client

ğŸµ **TuneHub** æ˜¯ä¸€ä¸ªç»Ÿä¸€çš„éŸ³ä¹ä¿¡æ¯è§£ææœåŠ¡å‰ç«¯åº”ç”¨ï¼Œæ”¯æŒå¤šå¹³å°éŸ³ä¹æœç´¢ã€æ’­æ”¾ã€ä¸‹è½½å’Œç®¡ç†ã€‚

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

TuneHub-Client æ˜¯ä¸€ä¸ªåŠŸèƒ½å®Œæ•´çš„éŸ³ä¹å®¢æˆ·ç«¯åº”ç”¨ï¼Œå…·å¤‡ä»¥ä¸‹æ ¸å¿ƒåŠŸèƒ½ï¼š

- ğŸ” **å¤šå¹³å°éŸ³ä¹æœç´¢**ï¼šæ”¯æŒç½‘æ˜“äº‘éŸ³ä¹ã€é…·æˆ‘éŸ³ä¹ã€QQéŸ³ä¹çš„èšåˆæœç´¢
- ğŸµ **åœ¨çº¿éŸ³ä¹æ’­æ”¾**ï¼šæ”¯æŒå¤šç§éŸ³è´¨é€‰æ‹©ï¼ˆ128k/320k/FLAC/Hi-Resï¼‰
- ğŸ’¾ **æœ¬åœ°éŸ³ä¹åº“ç®¡ç†**ï¼šè‡ªåŠ¨æ‰«æå’Œç®¡ç†æœ¬åœ°éŸ³ä¹æ–‡ä»¶
- ğŸ“‹ **æ­Œå•åŠŸèƒ½**ï¼šæ”¯æŒæ­Œå•è§£æã€æ‰¹é‡ä¿å­˜å’Œæ’­æ”¾
- ğŸ“Š **æ’­æ”¾ç»Ÿè®¡**ï¼šè¯¦ç»†çš„æ’­æ”¾å†å²å’Œç»Ÿè®¡æ•°æ®
- ğŸ¨ **ç°ä»£åŒ–ç•Œé¢**ï¼šæ”¯æŒæ˜æš—ä¸»é¢˜åˆ‡æ¢ï¼Œå“åº”å¼è®¾è®¡
- ğŸ›ï¸ **é«˜çº§åŠŸèƒ½**ï¼šæ’è¡Œæ¦œæµè§ˆã€éŸ³é¢‘å¯è§†åŒ–ã€å¿«æ·é”®æ”¯æŒ

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

### å‰ç«¯æŠ€æœ¯æ ˆ
- **HTML5/CSS3/JavaScript**ï¼šç°ä»£åŒ–WebæŠ€æœ¯
- **å“åº”å¼è®¾è®¡**ï¼šé€‚é…æ¡Œé¢å’Œç§»åŠ¨è®¾å¤‡
- **Web Audio API**ï¼šéŸ³é¢‘å¯è§†åŒ–å’Œæ’­æ”¾æ§åˆ¶
- **LocalStorage**ï¼šæœ¬åœ°æ•°æ®æŒä¹…åŒ–

### åç«¯æŠ€æœ¯æ ˆ
- **Node.js + Express**ï¼šè½»é‡çº§æœåŠ¡å™¨æ¡†æ¶
- **Axios**ï¼šHTTPå®¢æˆ·ç«¯ï¼Œç”¨äºAPIä»£ç†
- **CORS**ï¼šè·¨åŸŸèµ„æºå…±äº«æ”¯æŒ
- **æ–‡ä»¶ç³»ç»Ÿæ“ä½œ**ï¼šæœ¬åœ°éŸ³ä¹åº“ç®¡ç†

### æ ¸å¿ƒä¾èµ–
```json
{
  "dependencies": {
    "axios": "^1.6.0",
    "cors": "^2.8.5",
    "express": "^4.18.2"
  },
  "devDependencies": {
    "jest": "^30.2.0"
  }
}
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- **Node.js**: v14.0.0 æˆ–æ›´é«˜ç‰ˆæœ¬
- **npm**: v6.0.0 æˆ–æ›´é«˜ç‰ˆæœ¬
- **æ“ä½œç³»ç»Ÿ**: Windows/macOS/Linux

### å®‰è£…æ­¥éª¤

1. **å…‹éš†é¡¹ç›®**
   ```bash
   git clone <repository-url>
   cd TuneHub-Client
   ```

2. **å®‰è£…ä¾èµ–**
   ```bash
   npm install
   ```

3. **å¯åŠ¨å¼€å‘æœåŠ¡å™¨**
   ```bash
   npm run dev
   ```

4. **ç”Ÿäº§ç¯å¢ƒå¯åŠ¨**
   ```bash
   npm start
   ```

### è®¿é—®åº”ç”¨

å¯åŠ¨æˆåŠŸåï¼Œåœ¨æµè§ˆå™¨ä¸­è®¿é—®ï¼š
```
http://localhost:3000
```

## ğŸ“ é¡¹ç›®ç»“æ„

```
TuneHub-Client/
â”œâ”€â”€ public/                    # å‰ç«¯é™æ€èµ„æº
â”‚   â”œâ”€â”€ index.html            # ä¸»é¡µé¢
â”‚   â”œâ”€â”€ app.js               # å‰ç«¯æ ¸å¿ƒé€»è¾‘
â”‚   â””â”€â”€ styles.css           # æ ·å¼æ–‡ä»¶
â”œâ”€â”€ storage/                  # æœ¬åœ°éŸ³ä¹å­˜å‚¨ç›®å½•
â”‚   â”œâ”€â”€ kuwo/               # é…·æˆ‘éŸ³ä¹ç¼“å­˜
â”‚   â”œâ”€â”€ netease/            # ç½‘æ˜“äº‘éŸ³ä¹ç¼“å­˜
â”‚   â”œâ”€â”€ play_history.json   # æ’­æ”¾å†å²
â”‚   â””â”€â”€ playlist_history.json # æ­Œå•å†å²
â”œâ”€â”€ server.js                # åç«¯æœåŠ¡å™¨å…¥å£
â”œâ”€â”€ storage-utils.js         # å­˜å‚¨ç®¡ç†å·¥å…·
â”œâ”€â”€ history-utils.js         # å†å²è®°å½•ç®¡ç†
â”œâ”€â”€ playlist-history-utils.js # æ­Œå•å†å²ç®¡ç†
â”œâ”€â”€ package.json            # é¡¹ç›®é…ç½®å’Œä¾èµ–
â””â”€â”€ README.md              # é¡¹ç›®æ–‡æ¡£
```

## âš™ï¸ é…ç½®è¯´æ˜

### ç¯å¢ƒå˜é‡

é¡¹ç›®æ”¯æŒä»¥ä¸‹ç¯å¢ƒå˜é‡é…ç½®ï¼š

- `PORT`: æœåŠ¡å™¨ç«¯å£å·ï¼ˆé»˜è®¤ï¼š3000ï¼‰
- `NODE_ENV`: è¿è¡Œç¯å¢ƒï¼ˆdevelopment/productionï¼‰

### APIé…ç½®

é¡¹ç›®ä½¿ç”¨å¤–éƒ¨éŸ³ä¹APIæœåŠ¡ï¼š
- **API_BASE_URL**: `https://music-dl.sayqz.com`
- æ”¯æŒçš„éŸ³ä¹å¹³å°ï¼šç½‘æ˜“äº‘éŸ³ä¹ã€é…·æˆ‘éŸ³ä¹ã€QQéŸ³ä¹

## ğŸ® åŠŸèƒ½ä½¿ç”¨æŒ‡å—

### 1. éŸ³ä¹æœç´¢

1. åœ¨æœç´¢æ¡†ä¸­è¾“å…¥æ­Œæ›²åæˆ–æ­Œæ‰‹å
2. é€‰æ‹©æœç´¢å¹³å°ï¼ˆæ”¯æŒèšåˆæœç´¢ï¼‰
3. ç‚¹å‡»æœç´¢æŒ‰é’®æˆ–æŒ‰å›è½¦é”®
4. ç‚¹å‡»æœç´¢ç»“æœä¸­çš„æ­Œæ›²å³å¯æ’­æ”¾

### 2. æ­Œå•åŠŸèƒ½

1. åˆ‡æ¢åˆ°"æ­Œå•"æ ‡ç­¾é¡µ
2. é€‰æ‹©éŸ³ä¹å¹³å°å¹¶è¾“å…¥æ­Œå•ID
3. ç‚¹å‡»"åŠ è½½æ­Œå•"æŒ‰é’®
4. å¯ä»¥æ’­æ”¾å…¨éƒ¨æ­Œæ›²æˆ–ä¿å­˜åˆ°æœ¬åœ°

### 3. æœ¬åœ°éŸ³ä¹åº“

1. åˆ‡æ¢åˆ°"æœ¬åœ°åº“"æ ‡ç­¾é¡µ
2. ç‚¹å‡»"åˆ·æ–°åˆ—è¡¨"æ‰«ææœ¬åœ°éŸ³ä¹
3. ä½¿ç”¨æœç´¢æ¡†è¿‡æ»¤æœ¬åœ°æ­Œæ›²
4. ç‚¹å‡»æ­Œæ›²å³å¯æ’­æ”¾

### 4. æ’­æ”¾æ§åˆ¶

- **æ’­æ”¾/æš‚åœ**ï¼šç©ºæ ¼é”®æˆ–ç‚¹å‡»æ’­æ”¾æŒ‰é’®
- **ä¸Šä¸€é¦–/ä¸‹ä¸€é¦–**ï¼šâ† â†’ æ–¹å‘é”®
- **éŸ³é‡æ§åˆ¶**ï¼šâ†‘ â†“ æ–¹å‘é”®
- **æœç´¢æ¡†èšç„¦**ï¼š/ é”®
- **å…³é—­æ­Œè¯ç•Œé¢**ï¼šEscé”®

### 5. éŸ³è´¨é€‰æ‹©

åœ¨æ’­æ”¾å™¨å³ä¾§çš„ä¸‹æ‹‰èœå•ä¸­é€‰æ‹©éŸ³è´¨ï¼š
- 128kï¼šæ ‡å‡†éŸ³è´¨
- 320kï¼šé«˜å“è´¨
- FLACï¼šæ— æŸéŸ³è´¨
- Hi-Resï¼šé«˜è§£æéŸ³è´¨

## ğŸ”§ éƒ¨ç½²æŒ‡å—

### æœ¬åœ°éƒ¨ç½²

1. **å®‰è£…Node.jsç¯å¢ƒ**
   ```bash
   # Ubuntu/Debian
   curl -fsSL https://deb.nodesource.com/setup_18.x | sudo -E bash -
   sudo apt-get install -y nodejs
   
   # CentOS/RHEL
   curl -fsSL https://rpm.nodesource.com/setup_18.x | sudo bash -
   sudo yum install -y nodejs
   
   # macOS (ä½¿ç”¨Homebrew)
   brew install node@18
   ```

2. **éƒ¨ç½²åº”ç”¨**
   ```bash
   # å…‹éš†ä»£ç 
   git clone <repository-url>
   cd TuneHub-Client
   
   # å®‰è£…ä¾èµ–
   npm install
   
   # å¯åŠ¨æœåŠ¡
   npm start
   ```

### ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²

#### ä½¿ç”¨PM2è¿›ç¨‹ç®¡ç†

1. **å®‰è£…PM2**
   ```bash
   npm install -g pm2
   ```

2. **å¯åŠ¨åº”ç”¨**
   ```bash
   pm2 start server.js --name "tunehub-client" --env production
   ```

3. **è®¾ç½®å¼€æœºè‡ªå¯**
   ```bash
   pm2 startup
   pm2 save
   ```

#### ä½¿ç”¨Dockeréƒ¨ç½²

1. **åˆ›å»ºDockerfile**
   ```dockerfile
   FROM node:18-alpine
   
   WORKDIR /app
   
   COPY package*.json ./
   RUN npm install --production
   
   COPY . .
   
   EXPOSE 3000
   
   CMD ["npm", "start"]
   ```

2. **æ„å»ºå’Œè¿è¡Œ**
   ```bash
   docker build -t tunehub-client .
   docker run -d -p 3000:3000 --name tunehub tunehub-client
   ```

### Nginxåå‘ä»£ç†é…ç½®

```nginx
server {
    listen 80;
    server_name your-domain.com;
    
    location / {
        proxy_pass http://localhost:3000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_cache_bypass $http_upgrade;
    }
    
    # WebSocketæ”¯æŒ
    location /ws {
        proxy_pass http://localhost:3000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "upgrade";
    }
}
```

## ğŸ“Š APIæ¥å£è¯´æ˜

### éŸ³ä¹ç›¸å…³æ¥å£

- `GET /api/proxy/search` - éŸ³ä¹æœç´¢
- `GET /api/proxy/info` - è·å–æ­Œæ›²ä¿¡æ¯
- `GET /api/proxy/url` - è·å–æ’­æ”¾åœ°å€
- `GET /api/proxy/pic` - è·å–ä¸“è¾‘å°é¢
- `GET /api/proxy/lrc` - è·å–æ­Œè¯

### æœ¬åœ°åº“æ¥å£

- `GET /api/local/library` - è·å–æœ¬åœ°éŸ³ä¹åº“
- `GET /api/storage/stats` - è·å–å­˜å‚¨ç»Ÿè®¡

### å†å²è®°å½•æ¥å£

- `GET /api/history` - è·å–æ’­æ”¾å†å²
- `POST /api/history` - æ·»åŠ æ’­æ”¾å†å²
- `DELETE /api/history` - æ¸…ç©ºæ’­æ”¾å†å²

### æ­Œå•æ¥å£

- `GET /api/proxy/playlist` - è·å–æ­Œå•ä¿¡æ¯
- `POST /api/playlist/save-all` - æ‰¹é‡ä¿å­˜æ­Œå•

## ğŸ”’ å®‰å…¨è€ƒè™‘

1. **CORSé…ç½®**ï¼šå·²å¯ç”¨CORSæ”¯æŒï¼Œå…è®¸è·¨åŸŸè¯·æ±‚
2. **è¯·æ±‚é™åˆ¶**ï¼šè®¾ç½®äº†500MBçš„è¯·æ±‚ä½“å¤§å°é™åˆ¶
3. **æ–‡ä»¶è·¯å¾„å®‰å…¨**ï¼šä½¿ç”¨æ–‡ä»¶åæ¸…ç†å‡½æ•°é˜²æ­¢è·¯å¾„éå†æ”»å‡»
4. **é”™è¯¯å¤„ç†**ï¼šå®Œå–„çš„é”™è¯¯å¤„ç†å’Œç”¨æˆ·å‹å¥½çš„é”™è¯¯æç¤º

## ğŸš¨ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **ç«¯å£è¢«å ç”¨**
   ```bash
   # æŸ¥æ‰¾å ç”¨ç«¯å£çš„è¿›ç¨‹
   lsof -i :3000
   # æˆ–
   netstat -tlnp | grep 3000
   
   # ä¿®æ”¹ç«¯å£
   PORT=3001 npm start
   ```

2. **ä¾èµ–å®‰è£…å¤±è´¥**
   ```bash
   # æ¸…é™¤ç¼“å­˜é‡æ–°å®‰è£…
   npm cache clean --force
   rm -rf node_modules package-lock.json
   npm install
   ```

3. **æ–‡ä»¶æƒé™é—®é¢˜**
   ```bash
   # ç¡®ä¿storageç›®å½•å¯å†™
   chmod -R 755 storage
   ```

### æ—¥å¿—æŸ¥çœ‹

- **åº”ç”¨æ—¥å¿—**ï¼šæ§åˆ¶å°è¾“å‡º
- **é”™è¯¯æ—¥å¿—**ï¼šserver.jsä¸­çš„é”™è¯¯å¤„ç†ä¸­é—´ä»¶
- **è®¿é—®æ—¥å¿—**ï¼šExpressé»˜è®¤è¯·æ±‚æ—¥å¿—

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. Fork é¡¹ç›®åˆ°ä½ çš„GitHubè´¦æˆ·
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ï¼š`git checkout -b feature/your-feature`
3. æäº¤æ›´æ”¹ï¼š`git commit -am 'Add some feature'`
4. æ¨é€åˆ†æ”¯ï¼š`git push origin feature/your-feature`
5. æäº¤Pull Request

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…

## ğŸ†˜ æ”¯æŒä¸åé¦ˆ

- æäº¤Issueï¼šæŠ¥å‘Šbugæˆ–åŠŸèƒ½å»ºè®®
- æŸ¥çœ‹æ–‡æ¡£ï¼šè¯¦ç»†çš„APIæ–‡æ¡£å’Œä½¿ç”¨æŒ‡å—
- ç¤¾åŒºè®¨è®ºï¼šå‚ä¸åŠŸèƒ½è®¨è®ºå’Œæ”¹è¿›å»ºè®®

---

**TuneHub-Client** - è®©éŸ³ä¹è§¦æ‰‹å¯åŠ ğŸµ